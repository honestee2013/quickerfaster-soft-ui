<?php

return [
  'model' => 'App\Modules\Hr\Models\Shift',
  'fieldDefinitions' => [
    'name' => [
      'display' => 'inline',
      'field_type' => 'string',
      'label' => 'Shift Name',
      'validation' => 'required|string|max:255',
    ],
    'code' => [
      'display' => 'inline',
      'field_type' => 'string',
      'label' => 'Shift Code',
      'validation' => 'required|string|max:50|unique:shifts,code',
      'autoGenerate' => true,
    ],
    'start_time' => [
      'display' => 'inline',
      'field_type' => 'timepicker',
      'label' => 'Start Time',
      'validation' => 'required',
    ],
    'end_time' => [
      'display' => 'inline',
      'field_type' => 'timepicker',
      'label' => 'End Time',
      'validation' => 'required',
    ],
    'duration_hours' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Total Hours',
      'validation' => 'nullable|numeric|min:0',
    ],
    'break_duration' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Break Duration (hours)',
      'validation' => 'required|numeric|min:0',
    ],
    'is_overnight' => [
      'display' => 'inline',
      'field_type' => 'boolcheckbox',
      'label' => 'Overnight Shift',
      'validation' => 'nullable|boolean',
    ],
    'description' => [
      'display' => 'inline',
      'field_type' => 'textarea',
      'label' => 'Description',
      'validation' => 'nullable|string|max:1000',
    ],
    'is_active' => [
      'display' => 'inline',
      'field_type' => 'boolcheckbox',
      'label' => 'Active',
      'validation' => 'nullable|boolean',
    ],
    'is_default' => [
      'display' => 'inline',
      'field_type' => 'boolcheckbox',
      'label' => 'Default Shift',
      'validation' => 'nullable|boolean',
    ],
    'overtime_starts_after' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Overtime Starts After (hours)',
      'validation' => 'required|numeric|min:0',
    ],
    'grace_period_minutes' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Grace Period (minutes)',
      'validation' => 'required|integer|min:0',
    ],
    'max_shift_hours' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Maximum Shift Hours',
      'validation' => 'required|numeric|min:0',
    ],
    'shift_category' => [
      'display' => 'inline',
      'field_type' => 'select',
      'label' => 'Shift Category',
      'validation' => 'nullable',
      'options' => [
        'regular' => 'Regular',
        'peak' => 'Peak/Holiday',
        'weekend' => 'Weekend',
        'holiday' => 'Holiday',
        'emergency' => 'Emergency/Call',
        'training' => 'Training',
      ],
    ],
    'pay_multiplier' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Pay Rate Multiplier',
      'validation' => 'required|numeric|min:1.0',
    ],
    'minimum_staffing' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Minimum Staff Required',
      'validation' => 'nullable|integer|min:1',
    ],
    'is_restricted' => [
      'display' => 'inline',
      'field_type' => 'boolcheckbox',
      'label' => 'Restricted Shift',
      'validation' => 'nullable|boolean',
    ],
    'created_from_template_id' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Template Source',
      'maxSizeMB' => 1,
    ],
    'last_used_date' => [
      'display' => 'inline',
      'field_type' => 'datepicker',
      'label' => 'Last Used',
      'maxSizeMB' => 1,
    ],
    'usage_count' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Usage Count',
      'maxSizeMB' => 1,
    ],
    'shiftSchedules' => [
      'field_type' => 'checkbox',
      'relationship' => [
        'model' => 'App\Modules\Hr\Models\ShiftSchedule',
        'type' => 'hasMany',
        'display_field' => 'schedule_date',
        'hintField' => 'employee.first_name',
        'dynamic_property' => 'shiftSchedules',
        'foreign_key' => 'shift_id',
        'local_key' => 'id',
        'inlineAdd' => false,
      ],
      'options' => [
        'model' => 'App\Modules\Hr\Models\ShiftSchedule',
        'column' => 'schedule_date',
        'hintField' => 'employee.first_name',
      ],
      'label' => 'Shiftschedules',
      'multiSelect' => true,
      'display' => 'inline',
    ],
    'attendanceRecords' => [
      'field_type' => 'checkbox',
      'relationship' => [
        'model' => 'App\Modules\Hr\Models\Attendance',
        'type' => 'hasMany',
        'display_field' => 'date',
        'hintField' => 'employee.first_name',
        'dynamic_property' => 'attendanceRecords',
        'foreign_key' => 'shift_id',
        'local_key' => 'id',
        'inlineAdd' => false,
      ],
      'options' => [
        'model' => 'App\Modules\Hr\Models\Attendance',
        'column' => 'date',
        'hintField' => 'employee.first_name',
      ],
      'label' => 'Attendancerecords',
      'multiSelect' => true,
      'display' => 'inline',
    ],
    'departments' => [
      'field_type' => 'checkbox',
      'relationship' => [
        'model' => 'App\Modules\Hr\Models\Department',
        'type' => 'belongsToMany',
        'display_field' => 'name',
        'hintField' => '',
        'dynamic_property' => 'departments',
        'foreign_key' => 'shift_id',
        'local_key' => 'id',
        'inlineAdd' => false,
      ],
      'options' => [
        'model' => 'App\Modules\Hr\Models\Department',
        'column' => 'name',
        'hintField' => '',
      ],
      'label' => 'Departments',
      'multiSelect' => true,
      'display' => 'inline',
    ],
  ],
  'hiddenFields' => [
    'onTable' => [
      '0' => 'attendanceRecords',
      '1' => 'required_skills',
      '2' => 'shift_category',
      '3' => 'pay_multiplier',
      '4' => 'minimum_staffing',
      '5' => 'is_restricted',
      '6' => 'description',
      '7' => 'color',
      '8' => 'templateSource',
      '9' => 'departments',
      '10' => 'attendanceRecords',
      '11' => 'shiftSchedules',
      '12' => 'is_overnight',
      '13' => 'created_from_template_id',
      '14' => 'last_used_date',
      '15' => 'usage_count',
    ],
    'onNewForm' => [
      '0' => 'attendanceRecords',
      '1' => 'color',
      '2' => 'duration_hours',
      '3' => 'is_overnight',
      '4' => 'created_from_template_id',
      '5' => 'last_used_date',
      '6' => 'usage_count',
    ],
    'onEditForm' => [
      '0' => 'attendanceRecords',
      '1' => 'color',
      '2' => 'duration_hours',
      '3' => 'is_overnight',
      '4' => 'created_from_template_id',
      '5' => 'last_used_date',
      '6' => 'usage_count',
    ],
    'onQuery' => [],
  ],
  'simpleActions' => [
    '0' => 'show',
    '1' => 'edit',
    '2' => 'delete',
  ],
  'isTransaction' => false,
  'dispatchEvents' => false,
  'controls' => [
    'addButton' => [
      '0' => [
        'label' => 'New Shift',
        'type' => 'quick_add',
        'icon' => 'fas fa-plus-circle',
        'primary' => true,
      ],
      '1' => [
        'label' => 'From Template',
        'type' => 'dropdown',
        'icon' => 'fas fa-copy',
        'items' => [
          '0' => [
            'label' => 'Copy Existing Shift',
            'icon' => 'fas fa-clone',
            'route' => 'shifts.copy-template',
            'modal' => true,
          ],
          '1' => [
            'label' => 'Use System Template',
            'icon' => 'fas fa-layer-group',
            'route' => 'shifts.system-templates',
            'modal' => true,
          ],
        ],
      ],
    ],
    'files' => [
      'export' => [
        '0' => 'xls',
        '1' => 'csv',
        '2' => 'pdf',
      ],
      'print' => true,
    ],
    'bulkActions' => [
      'export' => [
        '0' => 'xls',
        '1' => 'csv',
        '2' => 'pdf',
      ],
      'updateModelFields' => [
        'activate' => [
          'label' => 'Activate Selected',
          'fieldName' => 'is_active',
          'fieldValue' => true,
        ],
        'deactivate' => [
          'label' => 'Deactivate Selected',
          'fieldName' => 'is_active',
          'fieldValue' => false,
        ],
      ],
      'duplicate' => [
        'label' => 'Duplicate Selected',
        'icon' => 'fas fa-copy',
        'route' => 'shifts.bulk-duplicate',
        'confirm' => 'Create copies of selected shifts?',
      ],
    ],
    'perPage' => [
      '0' => 10,
      '1' => 25,
      '2' => 50,
      '3' => 100,
    ],
    'search' => true,
    'showHideColumns' => true,
    'filters' => [
      '0' => [
        'field' => 'is_active',
        'type' => 'select',
        'options' => [
          '0' => 'All',
          '1' => 'Active Only',
          '2' => 'Inactive Only',
        ],
        'label' => 'Status',
        'default' => 'Active Only',
      ],
      '1' => [
        'field' => 'shift_category',
        'type' => 'select',
        'options' => [
          '0' => 'All',
          '1' => 'Regular',
          '2' => 'Peak/Holiday',
          '3' => 'Weekend',
          '4' => 'Holiday',
          '5' => 'Emergency',
          '6' => 'Training',
        ],
        'label' => 'Category',
      ],
      '2' => [
        'field' => 'is_overnight',
        'type' => 'select',
        'options' => [
          '0' => 'All',
          '1' => 'Overnight Only',
          '2' => 'Daytime Only',
        ],
        'label' => 'Shift Type',
      ],
      '3' => [
        'field' => 'created_at',
        'type' => 'date_range',
        'label' => 'Created Date',
      ],
    ],
  ],
  'fieldGroups' => [
    'basic_info' => [
      'title' => 'Basic Information',
      'groupType' => 'hr',
      'icon' => 'fas fa-info-circle',
      'fields' => [
        '0' => 'name',
        '1' => 'code',
        '2' => 'description',
        '3' => 'shift_category',
        '4' => 'color',
      ],
    ],
    'timing' => [
      'title' => 'Shift Timing',
      'groupType' => 'hr',
      'icon' => 'fas fa-clock',
      'fields' => [
        '0' => 'start_time',
        '1' => 'end_time',
        '2' => 'duration_hours',
        '3' => 'break_duration',
        '4' => 'is_overnight',
      ],
    ],
    'applicability' => [
      'title' => 'Applicability & Restrictions',
      'groupType' => 'hr',
      'icon' => 'fas fa-user-check',
      'fields' => [
        '0' => 'is_active',
        '1' => 'is_default',
        '2' => 'is_restricted',
        '3' => 'departments',
        '4' => 'required_skills',
        '5' => 'minimum_staffing',
      ],
    ],
    'rules' => [
      'title' => 'Shift Rules & Policies',
      'groupType' => 'hr',
      'icon' => 'fas fa-gavel',
      'fields' => [
        '0' => 'overtime_starts_after',
        '1' => 'grace_period_minutes',
        '2' => 'max_shift_hours',
        '3' => 'pay_multiplier',
        '4' => 'shiftSchedules',
      ],
    ],
    'system_info' => [
      'title' => 'System Information',
      'groupType' => 'hr',
      'icon' => 'fas fa-server',
      'fields' => [
        '0' => 'created_from_template_id',
        '1' => 'last_used_date',
        '2' => 'usage_count',
      ],
    ],
  ],
  'moreActions' => [
    '0' => [
      'title' => 'Copy Shift',
      'icon' => 'fas fa-copy',
      'route' => 'shifts.copy',
      'params' => [
        'shift_id' => '{id}',
      ],
      'confirm' => 'Create a copy of this shift template?',
    ],
    '1' => [
      'title' => 'Toggle Active Status',
      'icon' => 'fas fa-toggle-on',
      'updateModelField' => true,
      'fieldName' => 'is_active',
      'fieldValue' => 'toggle',
      'actionName' => 'toggle_shift_active',
      'confirm' => 'Change the active status of this shift?',
    ],
    '2' => [
      'title' => 'Set as Default',
      'icon' => 'fas fa-star',
      'updateModelField' => true,
      'fieldName' => 'is_default',
      'fieldValue' => true,
      'actionName' => 'set_shift_default',
      'confirm' => 'Set this as the default shift for new employees?',
      'condition' => [
        '0' => [
          'is_default' => false,
        ],
      ],
    ],
    '3' => [
      'title' => 'View Schedule Usage',
      'icon' => 'fas fa-calendar-alt',
      'route' => 'shift-schedules.index',
      'params' => [
        'shift_id' => '{id}',
      ],
    ],
    '4' => [
      'title' => 'View Attendance History',
      'icon' => 'fas fa-history',
      'route' => 'attendances.index',
      'params' => [
        'shift_id' => '{id}',
        'date_from' => 'last_month',
      ],
    ],
    '5' => [
      'title' => 'Export Shift Details',
      'icon' => 'fas fa-file-export',
      'route' => 'shifts.export.details',
      'params' => [
        'shift_id' => '{id}',
      ],
    ],
    '6' => [
      'title' => 'Create Schedule from Shift',
      'icon' => 'fas fa-calendar-plus',
      'route' => 'shift-schedules.create-from-shift',
      'params' => [
        'shift_id' => '{id}',
      ],
    ],
  ],
  'switchViews' => [
    'default' => 'list',
    'card' => [
      'titleFields' => [
        '0' => 'name',
      ],
      'subtitleFields' => [
        '0' => 'code',
        '1' => 'shift_category',
      ],
      'contentFields' => [
        '0' => 'start_time',
        '1' => 'end_time',
        '2' => 'duration_hours',
      ],
      'badgeField' => 'is_active',
      'ribbonField' => 'is_default',
      'ribbonText' => 'Default',
      'ribbonColor' => 'warning',
    ],
    'list' => [
      'titleFields' => [
        '0' => 'name',
      ],
      'subtitleFields' => [
        '0' => 'code',
        '1' => 'shift_category',
      ],
      'contentFields' => [
        '0' => 'start_time',
        '1' => 'end_time',
        '2' => 'break_duration',
      ],
      'badgeField' => 'is_active',
    ],
    'detail' => [
      'layout' => 'tab',
      'detailType' => 'record',
      'titleFields' => [
        '0' => 'name',
      ],
      'subtitleFields' => [
        '0' => 'code',
        '1' => 'shift_category',
      ],
      'tabs' => [
        '0' => [
          'title' => 'Overview',
          'icon' => 'fas fa-info-circle',
          'fields' => [
            '0' => 'name',
            '1' => 'code',
            '2' => 'description',
            '3' => 'color',
            '4' => 'shift_category',
            '5' => 'is_active',
            '6' => 'is_default',
          ],
        ],
        '1' => [
          'title' => 'Timing',
          'icon' => 'fas fa-clock',
          'fields' => [
            '0' => 'start_time',
            '1' => 'end_time',
            '2' => 'duration_hours',
            '3' => 'break_duration',
            '4' => 'is_overnight',
            '5' => 'max_shift_hours',
          ],
        ],
        '2' => [
          'title' => 'Rules & Policies',
          'icon' => 'fas fa-gavel',
          'fields' => [
            '0' => 'overtime_starts_after',
            '1' => 'grace_period_minutes',
            '2' => 'pay_multiplier',
            '3' => 'is_restricted',
            '4' => 'required_skills',
          ],
        ],
        '3' => [
          'title' => 'Applicability',
          'icon' => 'fas fa-building',
          'fields' => [
            '0' => 'department_ids',
            '1' => 'minimum_staffing',
          ],
        ],
        '4' => [
          'title' => 'Usage & History',
          'icon' => 'fas fa-chart-line',
          'fields' => [
            '0' => 'last_used_date',
            '1' => 'usage_count',
          ],
          'relation' => 'shiftSchedules',
          'relationLimit' => 10,
        ],
      ],
    ],
  ],
  'relations' => [
    'shiftSchedules' => [
      'type' => 'hasMany',
      'model' => 'App\Modules\Hr\Models\ShiftSchedule',
      'foreignKey' => 'shift_id',
      'displayField' => 'schedule_date',
      'hintField' => 'employee.first_name',
    ],
    'attendanceRecords' => [
      'type' => 'hasMany',
      'model' => 'App\Modules\Hr\Models\Attendance',
      'foreignKey' => 'shift_id',
      'displayField' => 'date',
      'hintField' => 'employee.first_name',
    ],
    'departments' => [
      'type' => 'belongsToMany',
      'model' => 'App\Modules\Hr\Models\Department',
      'foreignKey' => 'shift_id',
      'relatedKey' => 'department_id',
      'table' => 'shift_department',
      'displayField' => 'name',
    ],
    'templateSource' => [
      'type' => 'belongsTo',
      'model' => 'App\Modules\Hr\Models\Shift',
      'foreignKey' => 'created_from_template_id',
      'displayField' => 'name',
    ],
  ],
  'report' => [],
];
