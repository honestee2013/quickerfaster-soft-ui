<?php

return [
  'model' => 'App\Modules\Hr\Models\Holiday',
  'fieldDefinitions' => [
    'calendar_id' => [
      'display' => 'inline',
      'field_type' => 'select',
      'label' => 'Holiday Calendar',
      'validation' => 'required|exists:holiday_calendars,id',
      'relationship' => [
        'model' => 'App\Modules\Hr\Models\HolidayCalendar',
        'type' => 'belongsTo',
        'display_field' => 'name',
        'dynamic_property' => 'calendar',
        'foreign_key' => 'calendar_id',
        'inlineAdd' => false,
      ],
      'options' => [
        'model' => 'App\Modules\Hr\Models\HolidayCalendar',
        'column' => 'name',
        'hintField' => 'country_code,year',
      ],
    ],
    'name' => [
      'display' => 'inline',
      'field_type' => 'string',
      'label' => 'Holiday Name',
      'validation' => 'required|string|max:100',
    ],
    'description' => [
      'display' => 'inline',
      'field_type' => 'textarea',
      'label' => 'Description',
      'validation' => 'nullable|string|max:500',
    ],
    'date' => [
      'display' => 'inline',
      'field_type' => 'datepicker',
      'label' => 'Holiday Date',
      'validation' => 'required|date',
    ],
    'observed_date' => [
      'display' => 'inline',
      'field_type' => 'datepicker',
      'label' => 'Observed Date',
      'validation' => 'nullable|date|after_or_equal:date',
    ],
    'is_recurring' => [
      'display' => 'inline',
      'field_type' => 'boolcheckbox',
      'label' => 'Recurring Holiday',
      'validation' => 'boolean',
    ],
    'recurrence_pattern' => [
      'display' => 'inline',
      'field_type' => 'select',
      'label' => 'Recurrence Pattern',
      'validation' => 'nullable',
      'options' => [
        'yearly_fixed' => 'Yearly (Fixed Date)',
        'yearly_floating' => 'Yearly (Floating Date)',
        'custom' => 'Custom Pattern',
        'none' => 'One-time Only',
      ],
    ],
    'recurrence_rule' => [
      'display' => 'inline',
      'field_type' => 'textarea',
      'label' => 'Recurrence Rule',
      'validation' => 'nullable|string|max:255',
    ],
    'holiday_type' => [
      'display' => 'inline',
      'field_type' => 'select',
      'label' => 'Holiday Type',
      'validation' => 'required',
      'options' => [
        'public' => 'Public Holiday',
        'company' => 'Company Holiday',
        'regional' => 'Regional/State Holiday',
        'observance' => 'Observance',
        'optional' => 'Optional Holiday',
      ],
    ],
    'is_paid_holiday' => [
      'display' => 'inline',
      'field_type' => 'boolcheckbox',
      'label' => 'Paid Holiday',
      'validation' => 'boolean',
    ],
    'affects_payroll' => [
      'display' => 'inline',
      'field_type' => 'boolcheckbox',
      'label' => 'Affects Payroll',
      'validation' => 'boolean',
    ],
    'business_impact' => [
      'display' => 'inline',
      'field_type' => 'select',
      'label' => 'Business Impact',
      'validation' => 'required',
      'options' => [
        'office_closed' => 'Office Closed',
        'reduced_staff' => 'Reduced Staff',
        'normal_operations' => 'Normal Operations',
        'remote_only' => 'Remote Work Only',
        'essential_only' => 'Essential Staff Only',
      ],
    ],
    'eligible_employee_types' => [
      'display' => 'inline',
      'field_type' => 'checkbox',
      'label' => 'Eligible Employee Types',
      'validation' => 'array',
      'options' => [
        'full_time' => 'Full-time Employees',
        'part_time' => 'Part-time Employees',
        'contract' => 'Contractors',
        'intern' => 'Interns',
        'temporary' => 'Temporary Staff',
        'all' => 'All Employees',
      ],
      'multiSelect' => true,
    ],
    'holiday_pay_rate' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Holiday Pay Rate',
      'validation' => 'nullable|numeric|min:1.0|max:3.0',
    ],
    'minimum_hours_for_pay' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Minimum Hours for Pay',
      'validation' => 'nullable|numeric|min:0|max:24',
    ],
    'country_code' => [
      'display' => 'inline',
      'field_type' => 'string',
      'label' => 'Country Code',
      'validation' => 'nullable|string|size:2',
    ],
    'region_code' => [
      'display' => 'inline',
      'field_type' => 'string',
      'label' => 'Region/State Code',
      'validation' => 'nullable|string|max:10',
    ],
    'is_active' => [
      'display' => 'inline',
      'field_type' => 'boolcheckbox',
      'label' => 'Active',
      'validation' => 'boolean',
    ],
    'is_half_day' => [
      'display' => 'inline',
      'field_type' => 'boolcheckbox',
      'label' => 'Half Day Holiday',
      'validation' => 'boolean',
    ],
    'half_day_end_time' => [
      'display' => 'inline',
      'field_type' => 'timepicker',
      'label' => 'Half Day End Time',
      'validation' => 'required_if:is_half_day,true',
    ],
    'year' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Year',
      'validation' => 'nullable|integer|min:2000|max:2100',
    ],
    'generated_from_template' => [
      'display' => 'inline',
      'field_type' => 'boolcheckbox',
      'label' => 'Generated from Template',
      'maxSizeMB' => 1,
    ],
    'override_id' => [
      'display' => 'inline',
      'field_type' => 'number',
      'label' => 'Override ID',
      'maxSizeMB' => 1,
    ],
    'last_synced_at' => [
      'display' => 'inline',
      'field_type' => 'datetimepicker',
      'label' => 'Last Synced',
      'maxSizeMB' => 1,
    ],
  ],
  'hiddenFields' => [
    'onTable' => [
      '0' => 'attendanceRecords',
      '1' => 'description',
      '2' => 'recurrence_rule',
      '3' => 'region_code',
      '4' => 'holiday_pay_rate',
      '5' => 'minimum_hours_for_pay',
      '6' => 'half_day_end_time',
      '7' => 'year',
      '8' => 'generated_from_template',
      '9' => 'override_id',
      '10' => 'last_synced_at',
    ],
    'onNewForm' => [
      '0' => 'attendanceRecords',
      '1' => 'year',
      '2' => 'generated_from_template',
      '3' => 'override_id',
      '4' => 'last_synced_at',
    ],
    'onEditForm' => [
      '0' => 'attendanceRecords',
      '1' => 'year',
      '2' => 'generated_from_template',
      '3' => 'override_id',
      '4' => 'last_synced_at',
    ],
    'onQuery' => [],
  ],
  'simpleActions' => [
    '0' => 'show',
    '1' => 'edit',
    '2' => 'delete',
  ],
  'isTransaction' => false,
  'dispatchEvents' => false,
  'controls' => [
    'addButton' => [
      '0' => [
        'label' => 'Add Holiday',
        'type' => 'quick_add',
        'icon' => 'fas fa-plus-circle',
        'primary' => true,
      ],
      '1' => [
        'label' => 'Add Recurring Holiday',
        'type' => 'modal',
        'icon' => 'fas fa-redo',
        'url' => '/hr/holidays/create-recurring',
        'modalSize' => 'lg',
      ],
      '2' => [
        'label' => 'Import Holidays',
        'type' => 'modal',
        'icon' => 'fas fa-file-import',
        'url' => '/hr/holidays/import',
        'modalSize' => 'lg',
      ],
    ],
    'files' => [
      'export' => [
        '0' => 'xls',
        '1' => 'csv',
        '2' => 'pdf',
      ],
      'print' => true,
    ],
    'bulkActions' => [
      'export' => [
        '0' => 'xls',
        '1' => 'csv',
        '2' => 'pdf',
      ],
      'toggle_active' => [
        'label' => 'Toggle Active Status',
        'icon' => 'fas fa-toggle-on',
        'updateModelField' => 'is_active',
        'fieldValue' => 'toggle',
        'actionName' => 'bulk_toggle_holiday_active',
      ],
      'delete' => true,
      'duplicate' => [
        'label' => 'Duplicate Selected',
        'icon' => 'fas fa-copy',
        'route' => 'holidays.bulk-duplicate',
        'confirm' => 'Create copies of selected holidays?',
      ],
    ],
    'perPage' => [
      '0' => 10,
      '1' => 25,
      '2' => 50,
      '3' => 100,
    ],
    'search' => true,
    'showHideColumns' => true,
    'filters' => [
      '0' => [
        'field' => 'calendar_id',
        'type' => 'select',
        'optionsFrom' => 'holiday_calendars',
        'label' => 'Calendar',
      ],
      '1' => [
        'field' => 'year',
        'type' => 'select',
        'optionsFrom' => 'query',
        'query' => 'SELECT DISTINCT YEAR(date) as year FROM holidays ORDER BY year DESC',
        'label' => 'Year',
      ],
      '2' => [
        'field' => 'holiday_type',
        'type' => 'select',
        'options' => [
          '0' => 'All',
          '1' => 'Public',
          '2' => 'Company',
          '3' => 'Regional',
          '4' => 'Observance',
          '5' => 'Optional',
        ],
        'label' => 'Holiday Type',
      ],
      '3' => [
        'field' => 'is_active',
        'type' => 'select',
        'options' => [
          '0' => 'All',
          '1' => 'Active',
          '2' => 'Inactive',
        ],
        'label' => 'Status',
        'default' => 'Active',
      ],
      '4' => [
        'field' => 'is_paid_holiday',
        'type' => 'select',
        'options' => [
          '0' => 'All',
          '1' => 'Paid',
          '2' => 'Unpaid',
        ],
        'label' => 'Paid Status',
      ],
      '5' => [
        'field' => 'business_impact',
        'type' => 'select',
        'options' => [
          '0' => 'All',
          '1' => 'Office Closed',
          '2' => 'Reduced Staff',
          '3' => 'Normal Operations',
          '4' => 'Remote Only',
          '5' => 'Essential Only',
        ],
        'label' => 'Business Impact',
      ],
      '6' => [
        'field' => 'date',
        'type' => 'date_range',
        'label' => 'Date Range',
      ],
      '7' => [
        'field' => 'country_code',
        'type' => 'select',
        'options' => [
          '0' => 'All',
          '1' => 'US',
          '2' => 'GB',
          '3' => 'CA',
          '4' => 'AU',
          '5' => 'IN',
          '6' => 'NG',
        ],
        'label' => 'Country',
      ],
    ],
    'calendarView' => [
      'enable' => true,
      'defaultView' => 'month',
      'views' => [
        '0' => 'month',
        '1' => 'year',
      ],
      'startField' => 'date',
      'endField' => 'date',
      'titleField' => 'name',
      'colorField' => 'holiday_type',
      'statusField' => 'business_impact',
    ],
  ],
  'fieldGroups' => [
    'basic_info' => [
      'title' => 'Basic Information',
      'groupType' => 'hr',
      'icon' => 'fas fa-info-circle',
      'fields' => [
        '0' => 'calendar_id',
        '1' => 'name',
        '2' => 'description',
        '3' => 'holiday_type',
        '4' => 'is_active',
      ],
    ],
    'date_configuration' => [
      'title' => 'Date Configuration',
      'groupType' => 'hr',
      'icon' => 'fas fa-calendar',
      'fields' => [
        '0' => 'date',
        '1' => 'observed_date',
        '2' => 'is_recurring',
        '3' => 'recurrence_pattern',
        '4' => 'recurrence_rule',
        '5' => 'is_half_day',
        '6' => 'half_day_end_time',
      ],
    ],
    'business_impact' => [
      'title' => 'Business Impact',
      'groupType' => 'hr',
      'icon' => 'fas fa-building',
      'fields' => [
        '0' => 'business_impact',
        '1' => 'eligible_employee_types',
        '2' => 'country_code',
        '3' => 'region_code',
      ],
    ],
    'payroll_settings' => [
      'title' => 'Payroll Settings',
      'groupType' => 'hr',
      'icon' => 'fas fa-money-check',
      'fields' => [
        '0' => 'is_paid_holiday',
        '1' => 'affects_payroll',
        '2' => 'holiday_pay_rate',
        '3' => 'minimum_hours_for_pay',
      ],
    ],
    'system_info' => [
      'title' => 'System Information',
      'groupType' => 'hr',
      'icon' => 'fas fa-server',
      'fields' => [
        '0' => 'year',
        '1' => 'generated_from_template',
        '2' => 'override_id',
        '3' => 'last_synced_at',
      ],
    ],
  ],
  'moreActions' => [
    '0' => [
      'title' => 'Duplicate Holiday',
      'icon' => 'fas fa-copy',
      'route' => 'holidays.duplicate',
      'params' => [
        'holiday_id' => '{id}',
      ],
    ],
    '1' => [
      'title' => 'Toggle Active Status',
      'icon' => 'fas fa-toggle-on',
      'updateModelField' => true,
      'fieldName' => 'is_active',
      'fieldValue' => 'toggle',
      'actionName' => 'toggle_holiday_active',
    ],
    '2' => [
      'title' => 'View Affected Employees',
      'icon' => 'fas fa-users',
      'route' => 'holidays.impact-report',
      'params' => [
        'holiday_id' => '{id}',
      ],
    ],
    '3' => [
      'title' => 'Generate for Future Years',
      'icon' => 'fas fa-calendar-plus',
      'route' => 'holidays.generate-future',
      'params' => [
        'holiday_id' => '{id}',
      ],
      'modal' => true,
      'condition' => [
        '0' => [
          'is_recurring' => true,
        ],
      ],
    ],
    '4' => [
      'title' => 'Export to Calendar (ICS)',
      'icon' => 'fas fa-file-export',
      'route' => 'holidays.export.ics',
      'params' => [
        'holiday_id' => '{id}',
      ],
    ],
    '5' => [
      'title' => 'Create Exception',
      'icon' => 'fas fa-exclamation-circle',
      'route' => 'holidays.create-exception',
      'params' => [
        'holiday_id' => '{id}',
      ],
      'modal' => true,
    ],
    '6' => [
      'title' => 'View Attendance Impact',
      'icon' => 'fas fa-chart-bar',
      'route' => 'holidays.attendance-impact',
      'params' => [
        'holiday_id' => '{id}',
      ],
    ],
    '7' => [
      'title' => 'Send Holiday Announcement',
      'icon' => 'fas fa-bullhorn',
      'route' => 'holidays.announce',
      'params' => [
        'holiday_id' => '{id}',
      ],
      'modal' => true,
    ],
  ],
  'switchViews' => [
    'default' => 'list',
    'card' => [
      'titleFields' => [
        '0' => 'name',
      ],
      'subtitleFields' => [
        '0' => 'date',
        '1' => 'calendar.name',
      ],
      'contentFields' => [
        '0' => 'holiday_type',
        '1' => 'business_impact',
      ],
      'badgeField' => 'is_active',
      'badgeColors' => [
        'true' => 'success',
        'false' => 'secondary',
      ],
      'ribbonField' => 'is_paid_holiday',
      'ribbonText' => 'Paid',
      'ribbonColor' => 'warning',
    ],
    'list' => [
      'titleFields' => [
        '0' => 'name',
      ],
      'subtitleFields' => [
        '0' => 'date',
        '1' => 'calendar.name',
      ],
      'contentFields' => [
        '0' => 'holiday_type',
        '1' => 'business_impact',
        '2' => 'eligible_employee_types',
      ],
      'badgeField' => 'is_active',
      'badgeColors' => [
        'true' => 'success',
        'false' => 'secondary',
      ],
      'tagField' => 'is_paid_holiday',
      'tagText' => 'Paid',
      'tagColor' => 'success',
    ],
    'detail' => [
      'layout' => 'tab',
      'detailType' => 'record',
      'titleFields' => [
        '0' => 'name',
      ],
      'subtitleFields' => [
        '0' => 'date',
        '1' => 'calendar.name',
      ],
      'tabs' => [
        '0' => [
          'title' => 'Overview',
          'icon' => 'fas fa-info-circle',
          'fields' => [
            '0' => 'name',
            '1' => 'description',
            '2' => 'date',
            '3' => 'observed_date',
            '4' => 'holiday_type',
            '5' => 'is_active',
            '6' => 'is_half_day',
            '7' => 'half_day_end_time',
          ],
        ],
        '1' => [
          'title' => 'Recurrence',
          'icon' => 'fas fa-redo',
          'fields' => [
            '0' => 'is_recurring',
            '1' => 'recurrence_pattern',
            '2' => 'recurrence_rule',
          ],
        ],
        '2' => [
          'title' => 'Business Impact',
          'icon' => 'fas fa-building',
          'fields' => [
            '0' => 'business_impact',
            '1' => 'eligible_employee_types',
            '2' => 'country_code',
            '3' => 'region_code',
          ],
        ],
        '3' => [
          'title' => 'Payroll Settings',
          'icon' => 'fas fa-money-check',
          'fields' => [
            '0' => 'is_paid_holiday',
            '1' => 'affects_payroll',
            '2' => 'holiday_pay_rate',
            '3' => 'minimum_hours_for_pay',
          ],
        ],
        '4' => [
          'title' => 'System Information',
          'icon' => 'fas fa-server',
          'fields' => [
            '0' => 'generated_from_template',
            '1' => 'last_synced_at',
          ],
        ],
      ],
    ],
  ],
  'relations' => [
    'calendar' => [
      'type' => 'belongsTo',
      'model' => 'App\Modules\Hr\Models\HolidayCalendar',
      'foreignKey' => 'calendar_id',
      'displayField' => 'name',
      'hintField' => 'country_code,year',
    ],
  ],
  'report' => [],
];
